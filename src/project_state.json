{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 19,
  "summary": "Expand manager workflow so that after operators submit any Kaizen, hazard, or SUSA, managers are notified and can approve/reject, and the decision/status is visible to operators in their login experience.",
  "architectural_notes": [],
  "known_issues": [
    "Login page branding/theme changes are not appearing (login page not updated yet).",
    "Deployment/build is failing (deployment encountered an error; internal LLM/build error reported during attempted update).",
    "Requested changes to login flow/UI are not reflected; user still sees the earlier login experience and needs two distinct login options (Operator and Manager).",
    "Login page is showing a different logo than the one provided/expected (logo asset mismatch)."
  ],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-implement-internet-identity-sign-in-and-role-based-access-for-two-user-types-operator-and-manager-and-optionally-a-department-user-role-if-needed-for-kaizen-execution-provide-an-admin-manager-only-ui-to-assign-roles-to-registered-principals-so-access-to-features-is-permissioned",
      "title": "Implement Internet Identity sign-in and role-based access for two user types: Operator and Manager (and optionally a Department user role if needed for Kaizen execution). Provide an admin/manager-only UI to assign roles to registered principals so access to features is permissioned.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-create-operator-facing-forms-to-submit-the-following-observation-types-q-susa-q-hazards-and-safety-hazards-each-submission-must-store-type-title-summary-detailed-description-optional-area-line-department-timestamp-and-submitter-principal-provide-a-list-view-with-filtering-by-type-date-status-and-a-detail-view-for-each-submission",
      "title": "Create operator-facing forms to submit the following observation types: Q SUSA, Q Hazards, and Safety Hazards. Each submission must store: type, title/summary, detailed description, optional area/line/department, timestamp, and submitter principal; provide a list view with filtering by type/date/status and a detail view for each submission.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-add-kaizen-suggestion-submission-for-operators-with-fields-title-problem-statement-suggested-improvement-expected-benefit-optional-department-area-and-timestamp-kaizen-items-must-have-a-lifecycle-status-submitted-approved-rejected-assigned-in-progress-implemented-and-closed",
      "title": "Add Kaizen suggestion submission for operators with fields: title, problem statement, suggested improvement, expected benefit, optional department/area, and timestamp. Kaizen items must have a lifecycle status: Submitted, Approved, Rejected, Assigned, In Progress, Implemented, and Closed.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-manager-approval-workflow-for-kaizen-managers-can-approve-or-reject-with-a-required-comment-reason-status-updates-must-be-written-server-side-and-reflected-immediately-in-the-ui-after-the-action-completes",
      "title": "Implement a manager approval workflow for Kaizen: managers can approve or reject with a required comment/reason; status updates must be written server-side and reflected immediately in the UI after the action completes.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-on-kaizen-approval-support-assignment-to-a-concerned-department-and-allow-department-assignees-to-fill-in-required-tools-materials-free-text-and-or-structured-list-track-who-assigned-it-assigned-department-and-required-tools-materials-entries-with-timestamps",
      "title": "On Kaizen approval, support assignment to a concerned department and allow department/assignees to fill in required tools/materials (free-text and/or structured list). Track who assigned it, assigned department, and required tools/materials entries with timestamps.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-after-kaizen-implementation-allow-uploading-one-or-more-photos-as-proof-photos-must-be-stored-in-the-backend-as-blobs-and-retrievable-for-display-on-the-kaizen-detail-page-with-basic-metadata-uploader-timestamp-filename-content-type",
      "title": "After Kaizen implementation, allow uploading one or more photos as proof. Photos must be stored in the backend (as blobs) and retrievable for display on the Kaizen detail page with basic metadata (uploader, timestamp, filename/content type).",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-add-usage-monitoring-to-detect-when-an-operator-is-not-using-the-app-record-the-operator-s-last-activity-timestamp-e-g-on-sign-in-and-periodic-heartbeat-pings-while-the-app-is-open-provide-a-manager-dashboard-that-highlights-inactive-operators-e-g-no-activity-for-n-days-and-allows-exporting-downloading-a-simple-csv-report-of-inactivity",
      "title": "Add usage monitoring to detect when an operator is not using the app: record the operator’s last activity timestamp (e.g., on sign-in and periodic 'heartbeat' pings while the app is open). Provide a manager dashboard that highlights inactive operators (e.g., no activity for N days) and allows exporting/downloading a simple CSV report of inactivity.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-provide-analytics-screens-for-managers-showing-trends-and-gaps-using-built-in-metrics-non-llm-counts-over-time-top-categories-areas-departments-approval-rates-average-time-to-decision-for-kaizen-and-inactivity-distribution-include-a-gaps-view-that-flags-areas-departments-operators-with-low-submission-activity-relative-to-others",
      "title": "Provide analytics screens for managers showing trends and gaps using built-in metrics (non-LLM): counts over time, top categories/areas/departments, approval rates, average time-to-decision for Kaizen, and inactivity distribution. Include a 'gaps' view that flags areas/departments/operators with low submission activity relative to others.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-coherent-distinct-visual-theme-for-the-app-typography-spacing-component-styling-and-page-layout-suitable-for-an-industrial-continuous-improvement-tool-apply-it-consistently-across-login-dashboards-forms-lists-and-detail-pages",
      "title": "Create a coherent, distinct visual theme for the app (typography, spacing, component styling, and page layout) suitable for an industrial continuous-improvement tool. Apply it consistently across login, dashboards, forms, lists, and detail pages.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-generate-and-include-basic-static-brand-assets-and-render-them-in-the-ui-an-app-logo-and-a-simple-dashboard-illustration-empty-state-illustration-store-generated-images-under-frontend-public-assets-generated-and-reference-them-directly-from-the-frontend-not-via-backend",
      "title": "Generate and include basic static brand assets and render them in the UI: an app logo and a simple dashboard illustration/empty-state illustration. Store generated images under frontend/public/assets/generated and reference them directly from the frontend (not via backend).",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-new-manager-page-that-provides-a-simple-single-screen-overview-of-operator-activity-including-a-sortable-table-of-operators-with-last-activity-time-and-a-derived-days-inactive-value-plus-an-inactivity-threshold-control-that-highlights-operators-as-active-vs-inactive",
      "title": "Create a new manager page that provides a simple, single-screen overview of operator activity, including a sortable table of operators with last activity time and a derived 'days inactive' value, plus an inactivity threshold control that highlights operators as Active vs Inactive.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-add-navigation-and-routing-for-the-new-manager-operator-activity-overview-page-so-managers-can-access-it-from-the-header-manager-section",
      "title": "Add navigation and routing for the new manager operator-activity overview page so managers can access it from the header manager section.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-login-page-reflects-the-latest-branding-theme-changes-in-production-including-consistent-styling-layout-and-the-correct-rendering-of-the-existing-generated-brand-images-logo-and-illustration-on-the-login-route-and-when-requireauth-renders-the-loginpage-fallback",
      "title": "Ensure the Login page reflects the latest branding/theme changes in production, including consistent styling, layout, and the correct rendering of the existing generated brand images (logo and illustration) on the /login route and when RequireAuth renders the LoginPage fallback.",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-add-clear-manager-facing-guidance-and-navigation-to-handle-kaizen-approvals-rejections-managers-must-be-able-to-easily-find-kaizens-in-submitted-status-and-perform-approve-or-reject-actions-from-the-ui-with-the-required-comment-reason-captured-and-shown-on-the-kaizen-detail-page-after-the-decision",
      "title": "Add clear, manager-facing guidance and navigation to handle Kaizen approvals/rejections: managers must be able to easily find Kaizens in Submitted status and perform Approve or Reject actions from the UI, with the required comment/reason captured and shown on the Kaizen detail page after the decision.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-use-explicit-english-user-facing-copy-in-the-manager-decision-area-to-explain-how-approval-rejection-works-who-can-do-it-when-it-is-available-and-that-a-comment-reason-is-required",
      "title": "Use explicit English user-facing copy in the manager decision area to explain how approval/rejection works (who can do it, when it is available, and that a comment/reason is required).",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-investigate-and-fix-the-current-build-deployment-failure-so-the-application-can-compile-and-deploy-successfully-without-internal-errors",
      "title": "Investigate and fix the current build/deployment failure so the application can compile and deploy successfully without internal errors.",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-login-experience-to-present-two-distinct-internet-identity-login-entry-points-sign-in-as-operator-and-sign-in-as-manager-so-users-can-explicitly-choose-their-intended-role-path-at-login",
      "title": "Update the login experience to present two distinct Internet Identity login entry points: “Sign in as Operator” and “Sign in as Manager”, so users can explicitly choose their intended role path at login.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-persist-the-user-s-selected-login-option-operator-vs-manager-for-the-current-browser-session-and-use-it-to-control-the-post-login-redirect-behavior",
      "title": "Persist the user’s selected login option (Operator vs Manager) for the current browser session and use it to control the post-login redirect behavior.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-two-option-login-ui-is-used-consistently-whether-the-user-visits-the-login-route-directly-or-is-shown-the-login-ui-via-the-requireauth-unauthenticated-fallback",
      "title": "Ensure the two-option login UI is used consistently whether the user visits the /login route directly or is shown the login UI via the RequireAuth unauthenticated fallback.",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-add-frontend-manager-ui-to-review-newly-submitted-observations-and-perform-approve-reject-actions-with-a-required-comment-reason-using-clear-english-guidance-and-immediate-ui-refresh-after-the-action-completes",
      "title": "Add frontend manager UI to review newly submitted Observations and perform Approve/Reject actions with a required comment/reason, using clear English guidance and immediate UI refresh after the action completes.",
      "reqIds": [
        "REQ-22"
      ],
      "version": 1
    },
    {
      "id": "feature-update-operator-facing-observation-list-detail-screens-so-operators-can-see-manager-decisions-status-manager-comment-reason-for-their-submitted-hazards-susa-observations",
      "title": "Update operator-facing Observation list/detail screens so operators can see manager decisions (status + manager comment/reason) for their submitted Hazards/SUSA Observations.",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-add-react-query-hooks-mutations-for-observation-approval-rejection-and-ensure-relevant-queries-observations-list-detail-dashboard-counts-if-applicable-are-invalidated-refetched-after-manager-actions",
      "title": "Add React Query hooks/mutations for Observation approval/rejection and ensure relevant queries (Observations list/detail, Dashboard counts if applicable) are invalidated/refetched after manager actions.",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    },
    {
      "id": "feature-add-the-two-uploaded-images-to-the-frontend-as-static-generated-assets-under-frontend-public-assets-generated-so-they-can-be-referenced-directly-by-the-login-page",
      "title": "Add the two uploaded images to the frontend as static generated assets under `frontend/public/assets/generated` so they can be referenced directly by the Login page.",
      "reqIds": [
        "REQ-25"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-pages-loginpage-tsx-to-use-the-uploaded-itc-limited-logo-image-instead-of-the-current-assets-generated-kaizen-logo-dim-512x512-png",
      "title": "Update `frontend/src/pages/LoginPage.tsx` to use the uploaded ITC Limited logo image instead of the current `/assets/generated/kaizen-logo.dim_512x512.png`.",
      "reqIds": [
        "REQ-26"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-pages-loginpage-tsx-copy-so-the-primary-title-text-reads-exactly-itc-khordha-safetyhub-english",
      "title": "Update `frontend/src/pages/LoginPage.tsx` copy so the primary title text reads exactly: \"ITC Khordha Safetyhub\" (English).",
      "reqIds": [
        "REQ-27"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-pages-loginpage-tsx-to-use-the-uploaded-fs-line-food-processing-plant-photo-instead-of-the-current-assets-generated-kaizen-dashboard-illustration-dim-1200x600-png",
      "title": "Update `frontend/src/pages/LoginPage.tsx` to use the uploaded FS line food-processing plant photo instead of the current `/assets/generated/kaizen-dashboard-illustration.dim_1200x600.png`.",
      "reqIds": [
        "REQ-28"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-deployed-frontend-uses-the-exact-itc-logo-image-the-user-provided-by-placing-replacing-the-static-asset-at-frontend-public-assets-generated-itc-limited-logo-dim-512x512-png-and-verifying-that-the-rendered-logo-matches-that-file-not-an-older-cached-or-different-image",
      "title": "Ensure the deployed frontend uses the exact ITC logo image the user provided by placing/replacing the static asset at `frontend/public/assets/generated/itc-limited-logo.dim_512x512.png` and verifying that the rendered logo matches that file (not an older cached or different image).",
      "reqIds": [
        "REQ-29"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-authenticated-app-header-branding-to-use-the-same-itc-logo-asset-as-the-login-page-by-replacing-the-current-header-logo-reference-assets-generated-kaizen-logo-dim-512x512-png-with-assets-generated-itc-limited-logo-dim-512x512-png-in-frontend-src-components-layout-appheader-tsx",
      "title": "Update the authenticated app header branding to use the same ITC logo asset as the login page by replacing the current header logo reference (`/assets/generated/kaizen-logo.dim_512x512.png`) with `/assets/generated/itc-limited-logo.dim_512x512.png` in `frontend/src/components/layout/AppHeader.tsx`.",
      "reqIds": [
        "REQ-30"
      ],
      "version": 1
    },
    {
      "id": "feature-move-the-download-csv-export-button-on-the-manager-inactivity-dashboard-to-a-more-prominent-location-place-it-in-the-page-header-row-next-to-the-inactivity-dashboard-title-description-area-aligned-to-the-right-instead-of-inside-the-inactive-operators-card-header-the-button-must-remain-visible-only-when-there-is-at-least-one-inactive-operator-to-export-and-it-must-continue-to-export-the-same-csv-content-and-filename-format-currently-used",
      "title": "Move the \"Download CSV\" export button on the manager Inactivity Dashboard to a more prominent location: place it in the page header row next to the \"Inactivity Dashboard\" title/description area, aligned to the right, instead of inside the \"Inactive Operators\" card header. The button must remain visible only when there is at least one inactive operator to export, and it must continue to export the same CSV content and filename format currently used.",
      "reqIds": [
        "REQ-31"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Role-based app for operators and managers (authentication + permissions)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Operator forms to submit Q SUSA / Q hazards / safety hazards observations",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Kaizen suggestion submission with approval/rejection workflow and automatic status updates",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Usage monitoring and timely notifications when an operator is not using the app",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "On Kaizen approval, assign to concerned department and allow department to enter required tools/materials",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "After Kaizen implementation, allow photo upload as proof of concept and implementation",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "AI analytics to identify what analysis operators can do and highlight gaps/trends",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Add a simple manager dashboard UI to more easily review operator activity",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Add a manager/admin-only backend query that returns a complete operator activity list (not just inactive operators) so managers can review overall operator usage in one place. The returned data must include each operator principal, their lastActivity timestamp, and (when available) the operator's saved profile name/role from userProfiles.",
      "reqIds": [
        "REQ-11"
      ],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Provide distinct Operator vs Manager login options/entry points (two login options) in the login flow/UI",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Manager notifications + approve/reject workflow for operator-submitted Kaizen, hazards, and SUSAs, with status/decision visible to operators after manager action",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Extend the Observation data model and backend APIs so that manager approvals/rejections are supported for operator-submitted Observations (Q SUSA, Q Hazards, Safety Hazards), including storing the decision outcome and a required manager comment/reason.",
      "reqIds": [
        "REQ-21"
      ],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Move/reposition the Export button on the manager dashboard to a different location (per user preference)",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "projectName": "Operator/Manager Safety & Kaizen Web App (Submissions, Approvals, Assignments, Proof Photos, Usage & Analytics)",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}